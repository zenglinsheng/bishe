<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>修改老师信息-师生人事管理系统-WeAdmin 1.0</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" href="../css/font.css">
	<link rel="stylesheet" href="../css/weadmin.css">
	<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
	<!--[if lt IE 9]>
	<script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
	<script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>

<style>
	input.text{background-color:#EEE9E9}
</style>

<body>
<div class="weadmin-body">
	<form class="layui-form">
		<div class="layui-input-inline">
			<input type="hidden" id="userId" name="userId" autocomplete="off" class="layui-input userId text" readonly="true">
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">工号</label>
			<div class="layui-input-inline">
				<input type="text" id="jobNumber" name="jobNumber" autocomplete="off" class="layui-input jobNumber text" readonly="true">
			</div>
			<label class="layui-form-label">姓名</label>
			<div class="layui-input-inline">
				<input type="text" id="username" name="username" autocomplete="" class="layui-input username text" readonly="true">
			</div>
			<label class="layui-form-label">电话</label>
			<div class="layui-input-inline">
				<input type="text" id="telephone" name="telephone" autocomplete="off" class="layui-input telephone" lay-verify="phone">
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">邮箱</label>
			<div class="layui-input-inline">
				<input type="text" id="email" name="email" autocomplete="off" class="layui-input email" lay-verify="email">
			</div>
			<label class="layui-form-label">籍贯</label>
			<div class="layui-input-inline">
				<input type="text" id="nativePlace" name="nativePlace" autocomplete="" class="layui-input nativePlace">
			</div>
			<label class="layui-form-label">出生年月</label>
			<div class="layui-input-inline">
				<input type="text" id="birthdayStr" name="birthdayStr" class="layui-input birthdayStr">
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">性别</label>
			<div class="layui-input-block">
				<input type="radio" name="gender" value="0" title="男" id="gender" class="gender" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="gender" value="1" title="女" id="gender1" class="gender1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">婚姻状况</label>
			<div class="layui-input-block">
				<input type="radio" name="maritalStatus" value="0" title="未婚" id="maritalStatus" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="maritalStatus" value="1" title="已婚" id="maritalStatus1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
				<input type="radio" name="maritalStatus" value="2" title="未知" id="maritalStatus2" lay-verify="otherReq" {$sex.level=="2"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">政治面貌</label>
			<div class="layui-input-block">
				<input type="radio" name="politicalAppearance" value="0" title="群众" id="politicalAppearance" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="politicalAppearance" value="1" title="中共团员" id="politicalAppearance1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
				<input type="radio" name="politicalAppearance" value="2" title="中共党员" id="politicalAppearance2" lay-verify="otherReq" {$sex.level=="2"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">最高职称</label>
			<div class="layui-input-block">
				<input type="radio" name="topTitle" value="0" title="讲师" id="topTitle" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="topTitle" value="1" title="助教" id="topTitle1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
				<input type="radio" name="topTitle" value="2" title="副教授" id="topTitle2" lay-verify="otherReq" {$sex.level=="2"?"checked":""}>
				<input type="radio" name="topTitle" value="3" title="教授" id="topTitle3" lay-verify="otherReq" {$sex.level=="3"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">现聘职称</label>
			<div class="layui-input-block">
				<input type="radio" name="currentTitle" value="0" title="讲师" id="currentTitle" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="currentTitle" value="1" title="助教" id="currentTitle1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
				<input type="radio" name="currentTitle" value="2" title="副教授" id="currentTitle2" lay-verify="otherReq" {$sex.level=="2"?"checked":""}>
				<input type="radio" name="currentTitle" value="3" title="教授" id="currentTitle3" lay-verify="otherReq" {$sex.level=="3"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">第一学历</label>
			<div class="layui-input-block">
				<input type="radio" name="firstDegree" value="0" title="学士" id="firstDegree" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="firstDegree" value="1" title="硕士" id="firstDegree1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
				<input type="radio" name="firstDegree" value="2" title="博士" id="firstDegree2" lay-verify="otherReq" {$sex.level=="2"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">最高学历</label>
			<div class="layui-input-block">
				<input type="radio" name="highestDegree" value="0" title="学士" id="highestDegree" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="highestDegree" value="1" title="硕士" id="highestDegree1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
				<input type="radio" name="highestDegree" value="2" title="博士" id="highestDegree2" lay-verify="otherReq" {$sex.level=="2"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">编制情况</label>
			<div class="layui-input-block">
				<input type="radio" name="compilation" value="0" title="在编" id="compilation" lay-verify="otherReq" {$sex.level=="0"?"checked":""}>
				<input type="radio" name="compilation" value="1" title="非在编" id="compilation1" lay-verify="otherReq" {$sex.level=="1"?"checked":""}>
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">民族</label>
			<div class="layui-input-inline">
				<input type="text" id="nation" name="nation" autocomplete="" class="layui-input nation">
			</div>
			<label class="layui-form-label">参加工作时间</label>
			<div class="layui-input-inline">
				<input type="text" id="workingTimeStr" name="workingTimeStr" autocomplete="" class="layui-input workingTimeStr">
			</div>
			<label class="layui-form-label">身份证号</label>
			<div class="layui-input-inline">
				<input type="text" id="idNumber" name="idNumber" autocomplete="" class="layui-input idNumber" lay-verify="identity">
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">入校时间</label>
			<div class="layui-input-inline">
				<input type="text" id="entranceTimeStr" name="entranceTimeStr" class="layui-input entranceTimeStr">
			</div>
			<label class="layui-form-label">住宅电话</label>
			<div class="layui-input-inline">
				<input type="text" id="residentialTel" name="residentialTel" autocomplete="" class="layui-input residentialTel">
			</div>
			<label class="layui-form-label">邮编</label>
			<div class="layui-input-inline">
				<input type="text" id="zipCode" name="zipCode" autocomplete="" class="layui-input zipCode" lay-verify="number">
			</div>
		</div>


		<div class="layui-form-item">
			<label class="layui-form-label">行政职务</label>
			<div class="layui-input-inline">
				<input type="text" id="administrativePosition" name="administrativePosition" autocomplete="" class="layui-input administrativePosition">
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">户口所在地</label>
			<div class="layui-input-block">
				<input type="text" id="registeredResidence" name="registeredResidence" autocomplete="off" class="layui-input registeredResidence">
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label">家庭住址</label>
			<div class="layui-input-block">
				<input type="text" id="familyAddress" name="familyAddress" autocomplete="off" class="layui-input familyAddress">
			</div>
		</div>

		<div class="layui-form-item">
			<label class="layui-form-label"></label>
			<button class="layui-btn" lay-filter="update" lay-submit="add">提交</button>
		</div>

	</form>
</div>
<script src="../../lib/layui/layui.js" charset="utf-8"></script>
<script type="text/javascript">
	layui.extend({
		admin: '{/}../js/admin'
	});
	layui.use(['form', 'jquery', 'admin','layer','laydate'], function() {
		    var form = layui.form,
				$ = layui.jquery,
				admin = layui.admin,
				layer = layui.layer,
				laydate = layui.laydate;

		laydate.render({
			elem: '#birthdayStr'
		});
		laydate.render({
			elem: '#entranceTimeStr'
		});
		laydate.render({
			elem: '#workingTimeStr'
		});

		//自定义验证规则
		layui.form.verify({
			otherReq: function(value,item){
				var verifyName=$(item).attr('name')
						, verifyType=$(item).attr('type')
						,formElem=$(item).parents('.layui-form')//获取当前所在的form元素，如果存在的话
						,verifyElem=formElem.find('input[name='+verifyName+']')//获取需要校验的元素
						,isTrue= verifyElem.is(':checked')//是否命中校验
						,focusElem = verifyElem.next().find('i.layui-icon');//焦点元素
				if(!isTrue || !value){
					//定位焦点
					focusElem.css(verifyType=='radio'?{"color":"#FF5722"}:{"border-color":"#FF5722"});
					//对非输入框设置焦点
					focusElem.first().attr("tabIndex","1").css("outline","0").blur(function() {
						focusElem.css(verifyType=='radio'?{"color":""}:{"border-color":""});
					}).focus();
					//return '性别不能为空';
				}
			}
		});

		//监听提交
		form.on('submit(update)', function(data){
			layer.confirm("是否修改该老师个人信息？", {btn: ['确定','取消']},function () {
				$.ajax({
					url:'http://localhost:8088/teacher/updateOneByAdmin',
					dataType:'json',
					data:data.field,
					success:function(res){
						layer.msg('修改成功！');
						form.render()
					},
					fail:function () {
						layer.msg('修改失败！');
					}
				});
			});
			return false;
		});

	});
</script>
</body>

</html>